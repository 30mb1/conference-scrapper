<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Graph</title>
    <style>
        .conf {
            background: gray;
        }
        circle {
            r: {{ vert_radius }}
        }
        text {
            text-anchor: "middle";
            fill: "white";
            font-size: 30px;
            font-family: "Arial";
            pointer-events:none;
        }
        #conf-info {
            stroke-width: 4px;
            stroke: #000000;
        }
    </style>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
    <div id="conf-canvas">
        <svg viewBox="0,0,975,600" width="975" height="600">
            <g stroke="#000000" stroke-opacity="0.6">
            {% for edge_id, (conf_id1, conf_id2, weight, keywords) in edge_list.items() %}
                <line class="edge" id="e{{ edge_id }}"
                      x1="{{ conf_list[conf_id1][0] }}" y1="{{ conf_list[conf_id1][1] }}" stroke-width="{{ weight * edge_width }}"
                      x2="{{ conf_list[conf_id2][0] }}" y2="{{ conf_list[conf_id2][1] }}" stroke-width="{{ weight * edge_width }}">
                </line>
            {% endfor %}
            </g>
            <g stroke="#000000" stroke-width="1.5">
            {% for conf_id, (x, y, conf_title, url, description, start_date, end_date, additional_dates) in conf_list.items() %}
                <circle class="conf" id="c{{ conf_id }}" cx="{{ x }}" cy="{{ y }}">
                </circle>
                <text x="{{ x - vert_radius // 2}}" y="{{ y + vert_radius // 2}}">
                    {{ conf_title }}
                </text>
            {% endfor %}
            </g>
        </svg>
    </div>
    <div id="conf-info">

    </div>
    <script>
        var edge_dict = {};
        var vertex_dict = {};
        {% for edge_id, (conf_id1, conf_id2, _, _) in edge_list.items() %}
        edge_dict["e"+{{ edge_id }}] = ["c"+{{ conf_id1 }}, "c"+{{ conf_id2 }}];
        {% endfor %}
        // ----------------------------------------------
        circle_hover = function(event, mouse_is_over, elem) {
            $(elem).attr(
                "fill",
                mouse_is_over ? "#ff0000" : "#00ff00"
            );
            event.preventDefault();
            return false;
        };
        vertex_element = $("circle");
        vertex_element.on("mouseover", function(event) {
            return circle_hover(event, true, this);
        });
        vertex_element.on("mouseout", function(event) {
            return circle_hover(event, false, this);
        });
        // -----------------------------------------------
        edge_hover = function(event, mouse_is_over, elem) {
            ed = $(elem);
            ed.attr(
                "stroke",
                mouse_is_over ? "#ff0000" : "#00ff00"
            );
            vpair = edge_dict[ed.attr('id')];
            $("#"+vpair[0]).attr(
                "fill",
                mouse_is_over ? "#0000ff" : "#00ff00"
            );
            $("#"+vpair[1]).attr(
                "fill",
                mouse_is_over ? "#0000ff" : "#00ff00"
            );
            event.preventDefault();
            return false;
        };
        edge_element = $("line");
        edge_element.on("mouseover", function(event) {
            return edge_hover(event, true, this);
        });
        edge_element.on("mouseout", function(event) {
            return edge_hover(event, false, this);
        });
    </script>
</body>
</html>